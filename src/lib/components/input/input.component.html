<div class="spade-input" [class.spade-input--focused]="focused">
  @if (label) {
  <label [for]="inputId" class="spade-input__label">
    {{ label }}
    @if (required) {
    <span class="spade-input__required" aria-label="required">*</span>
    }
  </label>
  }

  <div class="spade-input__wrapper">
    <input
      #inputElement
      [id]="inputId"
      [type]="type"
      [class]="inputClasses"
      [placeholder]="placeholder"
      [disabled]="disabled"
      [readonly]="readonly"
      [required]="required"
      [maxlength]="maxLength"
      [attr.aria-label]="ariaLabel || label"
      [attr.aria-describedby]="ariaDescribedByIds"
      [attr.aria-invalid]="error ? 'true' : 'false'"
      [attr.aria-required]="required ? 'true' : 'false'"
      [attr.autocomplete]="autocomplete"
      [(ngModel)]="value"
      (input)="onInputChange($any($event.target).value)"
      (focus)="onInputFocus($event)"
      (blur)="onInputBlur($event)"
    />

    @if (showCharacterCount) {
    <span
      [id]="inputId + '-count'"
      class="spade-input__char-count"
      [class]="characterCountClass"
      aria-live="polite"
      aria-atomic="true"
    >
      {{ characterCount }}
    </span>
    }
  </div>

  @if (hint && !error) {
  <span [id]="inputId + '-hint'" class="spade-input__hint">
    {{ hint }}
  </span>
  } @if (error) {
  <span
    [id]="inputId + '-error'"
    class="spade-input__error"
    role="alert"
    aria-live="polite"
  >
    {{ error }}
  </span>
  }
</div>
